
async function READDIR(relativePath, oid, sdu) {
  try {
    // the readdir expects the payload to be the relative path to the file in 
    // which the user wants to read.
    const { servicePath } = sdu;
    const pathToDir = join(servicePath, relativePath);
    const entries = await dirRead(pathToDir);
    return JSON.stringify(code_0(true, "ACK/HASPAYLOAD", oid, entries)); 
  } catch(error) {
    if (error.code  === ERRORCODES.notFound) {
      return JSON.stringify(code_0(false, "ENOENTRY", oid, null)); 
    } else if (error.code  === ERRORCODES.notdirectory ) {
      return JSON.stringify(code_0(false, "OSFORBIDEN", oid, null)); 
    } else return JSON.stringify(code_0(false, "STDERR", oid, error.message)); 
  }
}
